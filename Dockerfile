FROM amazon/aws-lambda-python:3.9

ENV NUMBA_CACHE_DIR=/tmp/does_not_exist
ENV NUMBA_NUM_THREADS=1
ENV OMP_NUM_THREADS=1
ENV MKL_NUM_THREADS=1
ENV XDG_DATA_HOME=/tmp

ENV AWS_ACCESS_KEY_ID=ASIA3KDYAGJFP6MHBCFV
ENV AWS_SECRET_ACCESS_KEY=01HzMXdbQgwnr4XMWzlCaQslbp0vc+kugD+eNd1H
ENV AWS_SESSION_TOKEN=IQoJb3JpZ2luX2VjEFgaCXVzLWVhc3QtMSJHMEUCIAjD7Ikv9xI5GnWEFGIcnFJgeLH/4pfnKCfAysP4buTeAiEA6XRuFPPyJurprEen78F68uJ91PpH4tfBWrasMR4pDNAq9AEIgf//////////ARAAGgw3Nzc2NDA3NTE2OTAiDPblFiNGn7vR5rBHkSrIAfqgb4gBZyK5M6n3W+7xA9qANYByvO7Q3yEA1YHuQNMq3Oh7rLChXnwGrOfvVq3+GgGe1VKCsMlkIEJcLKDRovUJoshYmfvNYpSJjxs8gb1nYMlftMQHlV9Trbw7AWqS+P3S5d/DhZAEY2SuRiHoI9GhvR5E+Iar3zQdVjZ2nqVTnvpH1HY09U/9NuYzbIyRBW8AKmAtgBuBfQFb6sMw9n+TMAxIm1uAIsw1LGBofUXcOTzO6VroDNJ8XbrsMHtQwPFXfGtSFkF7MNKXoKMGOpgBmbX+EDPHhi+U8y1k30cTC0/jo9ljcI8KvxOKWMj8pVID/brokqGi5etBPsA4E+vr+aeR2sny2plOnSM3g7blVHzxSUgpJk/waRIKuIenhs5A4VEfCWcesE73iYvLtSl0OJjgcNzxE+uoa3b2BvIxDaavu7gpQozWz5CBDl5gocNRjFB5NnmKqNvAoPixaexD6pgVANn69D4=

COPY requirements.txt /tmp
RUN pip install -r /tmp/requirements.txt

COPY src/ /var/task

CMD [ "app.handler" ]